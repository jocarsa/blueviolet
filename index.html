<!doctype html>
<html>
	<head>
		<title>BlueViolet</title>
	</head>
	<body>
		<select id="imageSelect">
			<option value="">Select an image</option>
		</select>

		<script>
			document.addEventListener('DOMContentLoaded', function() {
				// Fetch the list of images from the PHP endpoint
				fetch('endpoint/?o=mapas')
					.then(response => {
						if (!response.ok) {
							throw new Error('Network response was not ok');
						}
						return response.json();
					})
					.then(data => {
						const selectElement = document.getElementById('imageSelect');

						// Populate the select element with the image names
						data.forEach(imageName => {
							const option = document.createElement('option');
							option.value = imageName;
							option.textContent = imageName;
							selectElement.appendChild(option);
						});
					})
					.catch(error => {
						console.error('There has been a problem with your fetch operation:', error);
					});

				// Add event listener to redirect on selection change
				document.getElementById('imageSelect').addEventListener('change', function() {
					const selectedImage = this.value;
					if (selectedImage) {
						window.location.href = `mapa.html?image=${encodeURIComponent(selectedImage)}`;
					}
				});
			});
		</script>
	</body>
</html>

