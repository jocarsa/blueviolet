<!doctype html>
<html>
<head>
  <title>BlueViolet</title>
</head>
<body>
  <div>
    <label for="usernameInput">Enter your username:</label>
    <input type="text" id="usernameInput" placeholder="Username" />
  </div>

  <select id="imageSelect">
    <option value="">Select an image</option>
  </select>

  <select id="colorSelect">
    <option value="">Select a color</option>
    <option value="#ff0000">Red</option>
    <option value="#0000ff">Blue</option>
    <option value="#00ff00">Green</option>
    <option value="#ffff00">Yellow</option>
    <option value="#800080">Purple</option>
  </select>

  <button id="startGameButton">Start Game</button>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Fetch the list of images from the PHP endpoint
      fetch('endpoint/?o=mapas')
        .then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          return response.json();
        })
        .then(data => {
          const selectElement = document.getElementById('imageSelect');

          // Populate the select element with the image names
          data.forEach(imageName => {
            const option = document.createElement('option');
            option.value = imageName;
            option.textContent = imageName;
            selectElement.appendChild(option);
          });
        })
        .catch(error => {
          console.error('There has been a problem with your fetch operation:', error);
        });

      // Add event listener to start game on button click
      document.getElementById('startGameButton').addEventListener('click', function () {
        const username = document.getElementById('usernameInput').value.trim();
        const selectedImage = document.getElementById('imageSelect').value;
        const selectedColor = document.getElementById('colorSelect').value;

        if (!username) {
          alert('Please enter a username to start the game.');
          return;
        }

        if (!selectedImage || !selectedColor) {
          alert('Please select both an image and a color to start the game.');
          return;
        }

        

        window.location.href = `mapa.html?image=${encodeURIComponent(selectedImage)}&color=${encodeURIComponent(selectedColor)}&username=${encodeURIComponent(username)}`;
      });
    });
  </script>
</body>
</html>

